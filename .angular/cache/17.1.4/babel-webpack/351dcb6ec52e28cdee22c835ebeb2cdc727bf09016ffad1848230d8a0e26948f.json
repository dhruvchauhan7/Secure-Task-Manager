{"ast":null,"code":"import _asyncToGenerator from \"E:/Practice/secure-task-manager/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction TasksComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"span\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 18);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 19);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const u_r8 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(u_r8.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(u_r8.role);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u2014 \", u_r8.orgId, \"\");\n  }\n}\nfunction TasksComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nfunction TasksComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13);\n    i0.ɵɵtext(2, \"Create Task\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 21)(4, \"label\")(5, \"span\");\n    i0.ɵɵtext(6, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 22);\n    i0.ɵɵlistener(\"ngModelChange\", function TasksComponent_div_15_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.title = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"label\")(9, \"span\");\n    i0.ɵɵtext(10, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"select\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function TasksComponent_div_15_Template_select_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.status = $event);\n    });\n    i0.ɵɵelementStart(12, \"option\", 24);\n    i0.ɵɵtext(13, \"OPEN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"option\", 25);\n    i0.ɵɵtext(15, \"IN_PROGRESS\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"option\", 26);\n    i0.ɵɵtext(17, \"DONE\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"label\", 27)(19, \"span\");\n    i0.ɵɵtext(20, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"textarea\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function TasksComponent_div_15_Template_textarea_ngModelChange_21_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.description = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"div\", 29)(23, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function TasksComponent_div_15_Template_button_click_23_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.create());\n    });\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.status);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.creating || !ctx_r2.title.trim());\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.creating ? \"Creating\\u2026\" : \"Create task\", \" \");\n  }\n}\nfunction TasksComponent_ng_template_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"div\", 13);\n    i0.ɵɵtext(2, \"Read-only access\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 32);\n    i0.ɵɵtext(4, \"Your role can view tasks, but cannot create/edit/delete.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TasksComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵtext(1, \"Loading\\u2026\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TasksComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵtext(1, \"No tasks yet.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TasksComponent_div_23_div_1_ng_container_1_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const t_r15 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(t_r15.description);\n  }\n}\nfunction TasksComponent_div_23_div_1_ng_container_1_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 47)(1, \"button\", 48);\n    i0.ɵɵlistener(\"click\", function TasksComponent_div_23_div_1_ng_container_1_div_16_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const t_r15 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r22.startEdit(t_r15));\n    });\n    i0.ɵɵtext(2, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 49);\n    i0.ɵɵlistener(\"click\", function TasksComponent_div_23_div_1_ng_container_1_div_16_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const t_r15 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r25.remove(t_r15.id));\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const t_r15 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r20 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r20.deletingId === t_r15.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r20.deletingId === t_r15.id ? \"Deleting\\u2026\" : \"Delete\", \" \");\n  }\n}\nfunction TasksComponent_div_23_div_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 38)(2, \"div\", 39)(3, \"span\", 40);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 41);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, TasksComponent_div_23_div_1_ng_container_1_div_7_Template, 2, 1, \"div\", 42);\n    i0.ɵɵelementStart(8, \"div\", 43)(9, \"span\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"span\", 44);\n    i0.ɵɵtext(12, \"\\u2022\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"span\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"date\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(16, TasksComponent_div_23_div_1_ng_container_1_div_16_Template, 5, 2, \"div\", 45);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const t_r15 = i0.ɵɵnextContext().$implicit;\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(t_r15.title);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"open\", t_r15.status === \"OPEN\")(\"progress\", t_r15.status === \"IN_PROGRESS\")(\"done\", t_r15.status === \"DONE\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", t_r15.status, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", t_r15.description);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Created by: \", t_r15.createdByEmail, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(15, 12, t_r15.createdAt, \"medium\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r16.canWrite);\n  }\n}\nfunction TasksComponent_div_23_div_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 50)(1, \"div\", 21)(2, \"label\", 27)(3, \"span\");\n    i0.ɵɵtext(4, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function TasksComponent_div_23_div_1_ng_template_2_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r29.editTitle = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"label\")(7, \"span\");\n    i0.ɵɵtext(8, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"select\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function TasksComponent_div_23_div_1_ng_template_2_Template_select_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r31 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r31.editStatus = $event);\n    });\n    i0.ɵɵelementStart(10, \"option\", 24);\n    i0.ɵɵtext(11, \"OPEN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"option\", 25);\n    i0.ɵɵtext(13, \"IN_PROGRESS\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"option\", 26);\n    i0.ɵɵtext(15, \"DONE\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"label\", 51)(17, \"span\");\n    i0.ɵɵtext(18, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"textarea\", 52);\n    i0.ɵɵlistener(\"ngModelChange\", function TasksComponent_div_23_div_1_ng_template_2_Template_textarea_ngModelChange_19_listener($event) {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r32 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r32.editDescription = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"div\", 29)(21, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function TasksComponent_div_23_div_1_ng_template_2_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const t_r15 = i0.ɵɵnextContext().$implicit;\n      const ctx_r33 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r33.saveEdit(t_r15.id));\n    });\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 53);\n    i0.ɵɵlistener(\"click\", function TasksComponent_div_23_div_1_ng_template_2_Template_button_click_23_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r35 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r35.cancelEdit());\n    });\n    i0.ɵɵtext(24, \"Cancel\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const t_r15 = i0.ɵɵnextContext().$implicit;\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r17.editTitle);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r17.editStatus);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r17.editDescription);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r17.savingId === t_r15.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r17.savingId === t_r15.id ? \"Saving\\u2026\" : \"Save\", \" \");\n  }\n}\nfunction TasksComponent_div_23_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵtemplate(1, TasksComponent_div_23_div_1_ng_container_1_Template, 17, 15, \"ng-container\", 36)(2, TasksComponent_div_23_div_1_ng_template_2_Template, 25, 5, \"ng-template\", null, 37, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const t_r15 = ctx.$implicit;\n    const _r18 = i0.ɵɵreference(3);\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.editingId !== t_r15.id)(\"ngIfElse\", _r18);\n  }\n}\nfunction TasksComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵtemplate(1, TasksComponent_div_23_div_1_Template, 4, 2, \"div\", 34);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.tasks);\n  }\n}\nexport class TasksComponent {\n  constructor(http) {\n    this.http = http;\n    this.API = 'http://localhost:3000/api';\n    this.tasks = [];\n    // create form\n    this.title = '';\n    this.description = '';\n    this.status = 'OPEN';\n    // ui state\n    this.loading = false;\n    this.creating = false;\n    this.error = '';\n    // role + user\n    this.me = null;\n    // editing state\n    this.editingId = null;\n    this.editTitle = '';\n    this.editDescription = '';\n    this.editStatus = 'OPEN';\n    this.savingId = null;\n    this.deletingId = null;\n  }\n  ngOnInit() {\n    this.me = this.decodeToken();\n    this.load();\n  }\n  get canWrite() {\n    return this.me?.role === 'OWNER' || this.me?.role === 'ADMIN';\n  }\n  refresh() {\n    this.load();\n  }\n  authHeaders() {\n    const token = localStorage.getItem('accessToken') ?? '';\n    return new HttpHeaders({\n      Authorization: `Bearer ${token}`\n    });\n  }\n  decodeToken() {\n    const token = localStorage.getItem('accessToken');\n    if (!token) return null;\n    try {\n      const middle = token.split('.')[1];\n      const json = atob(middle.replace(/-/g, '+').replace(/_/g, '/'));\n      return JSON.parse(json);\n    } catch {\n      return null;\n    }\n  }\n  load() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.error = '';\n      _this.loading = true;\n      try {\n        const headers = _this.authHeaders();\n        const res = yield _this.http.get(`${_this.API}/tasks`, {\n          headers\n        }).toPromise();\n        _this.tasks = res ?? [];\n      } catch (e) {\n        _this.error = e?.status === 401 ? 'Unauthorized (please login again).' : 'Failed to load tasks.';\n        _this.tasks = [];\n      } finally {\n        _this.loading = false;\n      }\n    })();\n  }\n  create() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.error = '';\n      if (!_this2.canWrite) {\n        _this2.error = 'You do not have permission to create tasks.';\n        return;\n      }\n      const title = _this2.title.trim();\n      if (!title) return;\n      _this2.creating = true;\n      try {\n        const headers = _this2.authHeaders();\n        const created = yield _this2.http.post(`${_this2.API}/tasks`, {\n          title,\n          description: _this2.description.trim() || undefined,\n          status: _this2.status\n        }, {\n          headers\n        }).toPromise();\n        if (created) _this2.tasks = [created, ..._this2.tasks];\n        _this2.title = '';\n        _this2.description = '';\n        _this2.status = 'OPEN';\n      } catch (e) {\n        _this2.error = e?.status === 401 ? 'Unauthorized (please login again).' : 'Failed to create task.';\n      } finally {\n        _this2.creating = false;\n      }\n    })();\n  }\n  startEdit(t) {\n    if (!this.canWrite) return;\n    this.editingId = t.id;\n    this.editTitle = t.title ?? '';\n    this.editDescription = t.description ?? '';\n    this.editStatus = t.status;\n  }\n  cancelEdit() {\n    this.editingId = null;\n    this.editTitle = '';\n    this.editDescription = '';\n    this.editStatus = 'OPEN';\n  }\n  saveEdit(id) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      _this3.error = '';\n      if (!_this3.canWrite) {\n        _this3.error = 'You do not have permission to edit tasks.';\n        return;\n      }\n      const title = _this3.editTitle.trim();\n      if (!title) {\n        _this3.error = 'Title cannot be empty.';\n        return;\n      }\n      _this3.savingId = id;\n      try {\n        const headers = _this3.authHeaders();\n        const updated = yield _this3.http.patch(`${_this3.API}/tasks/${id}`, {\n          title,\n          description: _this3.editDescription.trim() || undefined,\n          status: _this3.editStatus\n        }, {\n          headers\n        }).toPromise();\n        if (updated) {\n          _this3.tasks = _this3.tasks.map(t => t.id === id ? updated : t);\n        }\n        _this3.cancelEdit();\n      } catch (e) {\n        _this3.error = e?.status === 401 ? 'Unauthorized (please login again).' : e?.status === 403 ? 'Forbidden (role does not allow editing).' : 'Failed to update task.';\n      } finally {\n        _this3.savingId = null;\n      }\n    })();\n  }\n  remove(id) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      _this4.error = '';\n      if (!_this4.canWrite) {\n        _this4.error = 'You do not have permission to delete tasks.';\n        return;\n      }\n      const ok = confirm('Delete this task?');\n      if (!ok) return;\n      _this4.deletingId = id;\n      try {\n        const headers = _this4.authHeaders();\n        yield _this4.http.delete(`${_this4.API}/tasks/${id}`, {\n          headers\n        }).toPromise();\n        _this4.tasks = _this4.tasks.filter(t => t.id !== id);\n      } catch (e) {\n        _this4.error = e?.status === 401 ? 'Unauthorized (please login again).' : e?.status === 403 ? 'Forbidden (role does not allow deleting).' : 'Failed to delete task.';\n      } finally {\n        _this4.deletingId = null;\n      }\n    })();\n  }\n  static {\n    this.ɵfac = function TasksComponent_Factory(t) {\n      return new (t || TasksComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: TasksComponent,\n      selectors: [[\"stm-tasks\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 24,\n      vars: 8,\n      consts: [[1, \"page\"], [1, \"topbar\"], [1, \"brand\"], [1, \"right\"], [\"class\", \"meta\", 4, \"ngIf\"], [1, \"btn\", \"btn-ghost\", 3, \"disabled\", \"click\"], [1, \"container\"], [1, \"header\"], [1, \"sub\"], [\"class\", \"alert\", 4, \"ngIf\"], [\"class\", \"card\", 4, \"ngIf\", \"ngIfElse\"], [\"readOnlyNote\", \"\"], [1, \"card\"], [1, \"card-title\"], [\"class\", \"muted\", 4, \"ngIf\"], [\"class\", \"list\", 4, \"ngIf\"], [1, \"meta\"], [1, \"email\"], [1, \"pill\"], [1, \"org\"], [1, \"alert\"], [1, \"grid\"], [\"placeholder\", \"e.g., Screening Interview\", 1, \"input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"input\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"OPEN\"], [\"value\", \"IN_PROGRESS\"], [\"value\", \"DONE\"], [1, \"span-2\"], [\"rows\", \"3\", \"placeholder\", \"Optional details...\", 1, \"input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"actions\"], [1, \"btn\", 3, \"disabled\", \"click\"], [1, \"card\", \"subtle\"], [1, \"muted\"], [1, \"list\"], [\"class\", \"item\", 4, \"ngFor\", \"ngForOf\"], [1, \"item\"], [4, \"ngIf\", \"ngIfElse\"], [\"editMode\", \"\"], [1, \"item-main\"], [1, \"item-title\"], [1, \"title\"], [1, \"status\"], [\"class\", \"desc\", 4, \"ngIf\"], [1, \"meta2\"], [1, \"dot\"], [\"class\", \"item-actions\", 4, \"ngIf\"], [1, \"desc\"], [1, \"item-actions\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"disabled\", \"click\"], [1, \"edit\"], [1, \"span-3\"], [\"rows\", \"3\", 1, \"input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-ghost\", 3, \"click\"]],\n      template: function TasksComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n          i0.ɵɵtext(3, \"Secure Task Manager\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"div\", 3);\n          i0.ɵɵtemplate(5, TasksComponent_div_5_Template, 7, 3, \"div\", 4);\n          i0.ɵɵelementStart(6, \"button\", 5);\n          i0.ɵɵlistener(\"click\", function TasksComponent_Template_button_click_6_listener() {\n            return ctx.refresh();\n          });\n          i0.ɵɵtext(7, \"Refresh\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"h1\");\n          i0.ɵɵtext(11, \"Tasks\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"p\", 8);\n          i0.ɵɵtext(13, \"Create, update, and track tasks within your organization.\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(14, TasksComponent_div_14_Template, 2, 1, \"div\", 9)(15, TasksComponent_div_15_Template, 25, 5, \"div\", 10)(16, TasksComponent_ng_template_16_Template, 5, 0, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementStart(18, \"div\", 12)(19, \"div\", 13);\n          i0.ɵɵtext(20, \"Task List\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(21, TasksComponent_div_21_Template, 2, 0, \"div\", 14)(22, TasksComponent_div_22_Template, 2, 0, \"div\", 14)(23, TasksComponent_div_23_Template, 2, 1, \"div\", 15);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          const _r4 = i0.ɵɵreference(17);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.me);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.canWrite)(\"ngIfElse\", _r4);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.tasks.length === 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.tasks.length > 0);\n        }\n      },\n      dependencies: [CommonModule, i2.NgForOf, i2.NgIf, i2.DatePipe, FormsModule, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel],\n      styles: [\".page[_ngcontent-%COMP%] { padding: 6px; }\\n\\n.page__head[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: flex-end;\\n  justify-content: space-between;\\n  gap: 12px;\\n}\\n\\n.page__actions[_ngcontent-%COMP%] { display: flex; gap: 10px; align-items: center; }\\n\\n.grid[_ngcontent-%COMP%] {\\n  margin-top: 16px;\\n  display: grid;\\n  grid-template-columns: 1fr 1.4fr;\\n  gap: 16px;\\n  align-items: start;\\n}\\n\\n.panel[_ngcontent-%COMP%] { padding: 16px; }\\n.panel__title[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: baseline;\\n  justify-content: space-between;\\n  margin-bottom: 12px;\\n  gap: 10px;\\n}\\n\\n.form[_ngcontent-%COMP%] { display: grid; gap: 12px; }\\n.label[_ngcontent-%COMP%] { display: grid; gap: 6px; font-weight: 600; color: #334155; }\\n\\n.list[_ngcontent-%COMP%] { display: grid; gap: 12px; margin-top: 10px; }\\n\\n.task[_ngcontent-%COMP%] {\\n  padding: 14px;\\n  border-radius: 14px;\\n  border: 1px solid rgba(15, 23, 42, 0.08);\\n  background: rgba(255, 255, 255, 0.75);\\n}\\n\\n.task__top[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  gap: 10px;\\n}\\n.task__title[_ngcontent-%COMP%] { font-weight: 800; letter-spacing: -0.01em; }\\n.task__desc[_ngcontent-%COMP%] { margin-top: 6px; }\\n.task__meta[_ngcontent-%COMP%] { margin-top: 10px; font-size: 12px; display: flex; gap: 8px; flex-wrap: wrap; }\\n\\n\\n\\n@media (max-width: 920px) {\\n  .grid[_ngcontent-%COMP%] { grid-template-columns: 1fr; }\\n  .page__head[_ngcontent-%COMP%] { flex-direction: column; align-items: stretch; }\\n  .page__actions[_ngcontent-%COMP%] { justify-content: flex-start; }\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2FwcHMvZGFzaGJvYXJkL3NyYy9hcHAvdGFza3MvdGFza3MuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxRQUFRLFlBQVksRUFBRTs7QUFFdEI7RUFDRSxhQUFhO0VBQ2IscUJBQXFCO0VBQ3JCLDhCQUE4QjtFQUM5QixTQUFTO0FBQ1g7O0FBRUEsaUJBQWlCLGFBQWEsRUFBRSxTQUFTLEVBQUUsbUJBQW1CLEVBQUU7O0FBRWhFO0VBQ0UsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYixnQ0FBZ0M7RUFDaEMsU0FBUztFQUNULGtCQUFrQjtBQUNwQjs7QUFFQSxTQUFTLGFBQWEsRUFBRTtBQUN4QjtFQUNFLGFBQWE7RUFDYixxQkFBcUI7RUFDckIsOEJBQThCO0VBQzlCLG1CQUFtQjtFQUNuQixTQUFTO0FBQ1g7O0FBRUEsUUFBUSxhQUFhLEVBQUUsU0FBUyxFQUFFO0FBQ2xDLFNBQVMsYUFBYSxFQUFFLFFBQVEsRUFBRSxnQkFBZ0IsRUFBRSxjQUFjLEVBQUU7O0FBRXBFLFFBQVEsYUFBYSxFQUFFLFNBQVMsRUFBRSxnQkFBZ0IsRUFBRTs7QUFFcEQ7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHdDQUF3QztFQUN4QyxxQ0FBcUM7QUFDdkM7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLDhCQUE4QjtFQUM5QixTQUFTO0FBQ1g7QUFDQSxlQUFlLGdCQUFnQixFQUFFLHVCQUF1QixFQUFFO0FBQzFELGNBQWMsZUFBZSxFQUFFO0FBQy9CLGNBQWMsZ0JBQWdCLEVBQUUsZUFBZSxFQUFFLGFBQWEsRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFOztBQUUzRixlQUFlO0FBQ2Y7RUFDRSxRQUFRLDBCQUEwQixFQUFFO0VBQ3BDLGNBQWMsc0JBQXNCLEVBQUUsb0JBQW9CLEVBQUU7RUFDNUQsaUJBQWlCLDJCQUEyQixFQUFFO0FBQ2hEIiwic291cmNlc0NvbnRlbnQiOlsiLnBhZ2UgeyBwYWRkaW5nOiA2cHg7IH1cclxuXHJcbi5wYWdlX19oZWFkIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgZ2FwOiAxMnB4O1xyXG59XHJcblxyXG4ucGFnZV9fYWN0aW9ucyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfVxyXG5cclxuLmdyaWQge1xyXG4gIG1hcmdpbi10b3A6IDE2cHg7XHJcbiAgZGlzcGxheTogZ3JpZDtcclxuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxLjRmcjtcclxuICBnYXA6IDE2cHg7XHJcbiAgYWxpZ24taXRlbXM6IHN0YXJ0O1xyXG59XHJcblxyXG4ucGFuZWwgeyBwYWRkaW5nOiAxNnB4OyB9XHJcbi5wYW5lbF9fdGl0bGUge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGJhc2VsaW5lO1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBtYXJnaW4tYm90dG9tOiAxMnB4O1xyXG4gIGdhcDogMTBweDtcclxufVxyXG5cclxuLmZvcm0geyBkaXNwbGF5OiBncmlkOyBnYXA6IDEycHg7IH1cclxuLmxhYmVsIHsgZGlzcGxheTogZ3JpZDsgZ2FwOiA2cHg7IGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiAjMzM0MTU1OyB9XHJcblxyXG4ubGlzdCB7IGRpc3BsYXk6IGdyaWQ7IGdhcDogMTJweDsgbWFyZ2luLXRvcDogMTBweDsgfVxyXG5cclxuLnRhc2sge1xyXG4gIHBhZGRpbmc6IDE0cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcclxuICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDE1LCAyMywgNDIsIDAuMDgpO1xyXG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43NSk7XHJcbn1cclxuXHJcbi50YXNrX190b3Age1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgZ2FwOiAxMHB4O1xyXG59XHJcbi50YXNrX190aXRsZSB7IGZvbnQtd2VpZ2h0OiA4MDA7IGxldHRlci1zcGFjaW5nOiAtMC4wMWVtOyB9XHJcbi50YXNrX19kZXNjIHsgbWFyZ2luLXRvcDogNnB4OyB9XHJcbi50YXNrX19tZXRhIHsgbWFyZ2luLXRvcDogMTBweDsgZm9udC1zaXplOiAxMnB4OyBkaXNwbGF5OiBmbGV4OyBnYXA6IDhweDsgZmxleC13cmFwOiB3cmFwOyB9XHJcblxyXG4vKiBSZXNwb25zaXZlICovXHJcbkBtZWRpYSAobWF4LXdpZHRoOiA5MjBweCkge1xyXG4gIC5ncmlkIHsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7IH1cclxuICAucGFnZV9faGVhZCB7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBzdHJldGNoOyB9XHJcbiAgLnBhZ2VfX2FjdGlvbnMgeyBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7IH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","FormsModule","HttpClient","HttpHeaders","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","u_r8","email","role","ɵɵtextInterpolate1","orgId","ctx_r1","error","ɵɵlistener","TasksComponent_div_15_Template_input_ngModelChange_7_listener","$event","ɵɵrestoreView","_r10","ctx_r9","ɵɵnextContext","ɵɵresetView","title","TasksComponent_div_15_Template_select_ngModelChange_11_listener","ctx_r11","status","TasksComponent_div_15_Template_textarea_ngModelChange_21_listener","ctx_r12","description","TasksComponent_div_15_Template_button_click_23_listener","ctx_r13","create","ɵɵproperty","ctx_r2","creating","trim","t_r15","TasksComponent_div_23_div_1_ng_container_1_div_16_Template_button_click_1_listener","_r24","$implicit","ctx_r22","startEdit","TasksComponent_div_23_div_1_ng_container_1_div_16_Template_button_click_3_listener","ctx_r25","remove","id","ctx_r20","deletingId","ɵɵelementContainerStart","ɵɵtemplate","TasksComponent_div_23_div_1_ng_container_1_div_7_Template","TasksComponent_div_23_div_1_ng_container_1_div_16_Template","ɵɵelementContainerEnd","ɵɵclassProp","createdByEmail","ɵɵpipeBind2","createdAt","ctx_r16","canWrite","TasksComponent_div_23_div_1_ng_template_2_Template_input_ngModelChange_5_listener","_r30","ctx_r29","editTitle","TasksComponent_div_23_div_1_ng_template_2_Template_select_ngModelChange_9_listener","ctx_r31","editStatus","TasksComponent_div_23_div_1_ng_template_2_Template_textarea_ngModelChange_19_listener","ctx_r32","editDescription","TasksComponent_div_23_div_1_ng_template_2_Template_button_click_21_listener","ctx_r33","saveEdit","TasksComponent_div_23_div_1_ng_template_2_Template_button_click_23_listener","ctx_r35","cancelEdit","ctx_r17","savingId","TasksComponent_div_23_div_1_ng_container_1_Template","TasksComponent_div_23_div_1_ng_template_2_Template","ɵɵtemplateRefExtractor","ctx_r14","editingId","_r18","TasksComponent_div_23_div_1_Template","ctx_r7","tasks","TasksComponent","constructor","http","API","loading","me","ngOnInit","decodeToken","load","refresh","authHeaders","token","localStorage","getItem","Authorization","middle","split","json","atob","replace","JSON","parse","_this","_asyncToGenerator","headers","res","get","toPromise","e","_this2","created","post","undefined","t","_this3","updated","patch","map","_this4","ok","confirm","delete","filter","ɵɵdirectiveInject","i1","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","TasksComponent_Template","rf","ctx","TasksComponent_div_5_Template","TasksComponent_Template_button_click_6_listener","TasksComponent_div_14_Template","TasksComponent_div_15_Template","TasksComponent_ng_template_16_Template","TasksComponent_div_21_Template","TasksComponent_div_22_Template","TasksComponent_div_23_Template","_r4","length","i2","NgForOf","NgIf","DatePipe","i3","NgSelectOption","ɵNgSelectMultipleOption","DefaultValueAccessor","SelectControlValueAccessor","NgControlStatus","NgModel","styles"],"sources":["E:\\Practice\\secure-task-manager\\apps\\dashboard\\src\\app\\tasks\\tasks.component.ts","E:\\Practice\\secure-task-manager\\apps\\dashboard\\src\\app\\tasks\\tasks.component.html"],"sourcesContent":["import { CommonModule } from '@angular/common';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\ntype Role = 'OWNER' | 'ADMIN' | 'VIEWER';\r\ntype TaskStatus = 'OPEN' | 'IN_PROGRESS' | 'DONE';\r\n\r\ntype Task = {\r\n  id: string;\r\n  orgId: string;\r\n  title: string;\r\n  description?: string | null;\r\n  status: TaskStatus;\r\n  createdByEmail: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n};\r\n\r\ntype JwtPayload = {\r\n  sub: string;\r\n  email: string;\r\n  role: Role;\r\n  orgId: string;\r\n  iat: number;\r\n  exp: number;\r\n};\r\n\r\n@Component({\r\n  selector: 'stm-tasks',\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule],\r\n  templateUrl: './tasks.component.html',\r\n  styleUrl: './tasks.component.css',\r\n})\r\nexport class TasksComponent implements OnInit {\r\n  private readonly API = 'http://localhost:3000/api';\r\n\r\n  tasks: Task[] = [];\r\n\r\n  // create form\r\n  title = '';\r\n  description = '';\r\n  status: TaskStatus = 'OPEN';\r\n\r\n  // ui state\r\n  loading = false;\r\n  creating = false;\r\n  error = '';\r\n\r\n  // role + user\r\n  me: JwtPayload | null = null;\r\n\r\n  // editing state\r\n  editingId: string | null = null;\r\n  editTitle = '';\r\n  editDescription = '';\r\n  editStatus: TaskStatus = 'OPEN';\r\n  savingId: string | null = null;\r\n  deletingId: string | null = null;\r\n\r\n  constructor(private readonly http: HttpClient) {}\r\n\r\n  ngOnInit(): void {\r\n    this.me = this.decodeToken();\r\n    this.load();\r\n  }\r\n\r\n  get canWrite(): boolean {\r\n    return this.me?.role === 'OWNER' || this.me?.role === 'ADMIN';\r\n  }\r\n\r\n  refresh(): void {\r\n    this.load();\r\n  }\r\n\r\n  private authHeaders(): HttpHeaders {\r\n    const token = localStorage.getItem('accessToken') ?? '';\r\n    return new HttpHeaders({ Authorization: `Bearer ${token}` });\r\n  }\r\n\r\n  private decodeToken(): JwtPayload | null {\r\n    const token = localStorage.getItem('accessToken');\r\n    if (!token) return null;\r\n\r\n    try {\r\n      const middle = token.split('.')[1];\r\n      const json = atob(middle.replace(/-/g, '+').replace(/_/g, '/'));\r\n      return JSON.parse(json) as JwtPayload;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  async load(): Promise<void> {\r\n    this.error = '';\r\n    this.loading = true;\r\n\r\n    try {\r\n      const headers = this.authHeaders();\r\n      const res = await this.http.get<Task[]>(`${this.API}/tasks`, { headers }).toPromise();\r\n      this.tasks = res ?? [];\r\n    } catch (e: any) {\r\n      this.error = e?.status === 401 ? 'Unauthorized (please login again).' : 'Failed to load tasks.';\r\n      this.tasks = [];\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  async create(): Promise<void> {\r\n    this.error = '';\r\n    if (!this.canWrite) {\r\n      this.error = 'You do not have permission to create tasks.';\r\n      return;\r\n    }\r\n\r\n    const title = this.title.trim();\r\n    if (!title) return;\r\n\r\n    this.creating = true;\r\n\r\n    try {\r\n      const headers = this.authHeaders();\r\n      const created = await this.http\r\n        .post<Task>(\r\n          `${this.API}/tasks`,\r\n          {\r\n            title,\r\n            description: this.description.trim() || undefined,\r\n            status: this.status,\r\n          },\r\n          { headers }\r\n        )\r\n        .toPromise();\r\n\r\n      if (created) this.tasks = [created, ...this.tasks];\r\n\r\n      this.title = '';\r\n      this.description = '';\r\n      this.status = 'OPEN';\r\n    } catch (e: any) {\r\n      this.error = e?.status === 401 ? 'Unauthorized (please login again).' : 'Failed to create task.';\r\n    } finally {\r\n      this.creating = false;\r\n    }\r\n  }\r\n\r\n  startEdit(t: Task): void {\r\n    if (!this.canWrite) return;\r\n\r\n    this.editingId = t.id;\r\n    this.editTitle = t.title ?? '';\r\n    this.editDescription = (t.description ?? '') as string;\r\n    this.editStatus = t.status;\r\n  }\r\n\r\n  cancelEdit(): void {\r\n    this.editingId = null;\r\n    this.editTitle = '';\r\n    this.editDescription = '';\r\n    this.editStatus = 'OPEN';\r\n  }\r\n\r\n  async saveEdit(id: string): Promise<void> {\r\n    this.error = '';\r\n    if (!this.canWrite) {\r\n      this.error = 'You do not have permission to edit tasks.';\r\n      return;\r\n    }\r\n\r\n    const title = this.editTitle.trim();\r\n    if (!title) {\r\n      this.error = 'Title cannot be empty.';\r\n      return;\r\n    }\r\n\r\n    this.savingId = id;\r\n\r\n    try {\r\n      const headers = this.authHeaders();\r\n      const updated = await this.http\r\n        .patch<Task>(\r\n          `${this.API}/tasks/${id}`,\r\n          {\r\n            title,\r\n            description: this.editDescription.trim() || undefined,\r\n            status: this.editStatus,\r\n          },\r\n          { headers }\r\n        )\r\n        .toPromise();\r\n\r\n      if (updated) {\r\n        this.tasks = this.tasks.map((t) => (t.id === id ? updated : t));\r\n      }\r\n\r\n      this.cancelEdit();\r\n    } catch (e: any) {\r\n      this.error =\r\n        e?.status === 401\r\n          ? 'Unauthorized (please login again).'\r\n          : e?.status === 403\r\n          ? 'Forbidden (role does not allow editing).'\r\n          : 'Failed to update task.';\r\n    } finally {\r\n      this.savingId = null;\r\n    }\r\n  }\r\n\r\n  async remove(id: string): Promise<void> {\r\n    this.error = '';\r\n    if (!this.canWrite) {\r\n      this.error = 'You do not have permission to delete tasks.';\r\n      return;\r\n    }\r\n\r\n    const ok = confirm('Delete this task?');\r\n    if (!ok) return;\r\n\r\n    this.deletingId = id;\r\n\r\n    try {\r\n      const headers = this.authHeaders();\r\n      await this.http.delete(`${this.API}/tasks/${id}`, { headers }).toPromise();\r\n      this.tasks = this.tasks.filter((t) => t.id !== id);\r\n    } catch (e: any) {\r\n      this.error =\r\n        e?.status === 401\r\n          ? 'Unauthorized (please login again).'\r\n          : e?.status === 403\r\n          ? 'Forbidden (role does not allow deleting).'\r\n          : 'Failed to delete task.';\r\n    } finally {\r\n      this.deletingId = null;\r\n    }\r\n  }\r\n}\r\n","<div class=\"page\">\r\n    <div class=\"topbar\">\r\n      <div class=\"brand\">Secure Task Manager</div>\r\n  \r\n      <div class=\"right\">\r\n        <div class=\"meta\" *ngIf=\"me as u\">\r\n          <span class=\"email\">{{ u.email }}</span>\r\n          <span class=\"pill\">{{ u.role }}</span>\r\n          <span class=\"org\">— {{ u.orgId }}</span>\r\n        </div>\r\n  \r\n        <button class=\"btn btn-ghost\" (click)=\"refresh()\" [disabled]=\"loading\">Refresh</button>\r\n      </div>\r\n    </div>\r\n  \r\n    <div class=\"container\">\r\n      <div class=\"header\">\r\n        <h1>Tasks</h1>\r\n        <p class=\"sub\">Create, update, and track tasks within your organization.</p>\r\n      </div>\r\n  \r\n      <div class=\"alert\" *ngIf=\"error\">{{ error }}</div>\r\n  \r\n      <!-- Create card (only for OWNER/ADMIN) -->\r\n      <div class=\"card\" *ngIf=\"canWrite; else readOnlyNote\">\r\n        <div class=\"card-title\">Create Task</div>\r\n  \r\n        <div class=\"grid\">\r\n          <label>\r\n            <span>Title</span>\r\n            <input class=\"input\" [(ngModel)]=\"title\" placeholder=\"e.g., Screening Interview\" />\r\n          </label>\r\n  \r\n          <label>\r\n            <span>Status</span>\r\n            <select class=\"input\" [(ngModel)]=\"status\">\r\n              <option value=\"OPEN\">OPEN</option>\r\n              <option value=\"IN_PROGRESS\">IN_PROGRESS</option>\r\n              <option value=\"DONE\">DONE</option>\r\n            </select>\r\n          </label>\r\n  \r\n          <label class=\"span-2\">\r\n            <span>Description</span>\r\n            <textarea class=\"input\" [(ngModel)]=\"description\" rows=\"3\" placeholder=\"Optional details...\"></textarea>\r\n          </label>\r\n        </div>\r\n  \r\n        <div class=\"actions\">\r\n          <button class=\"btn\" (click)=\"create()\" [disabled]=\"creating || !title.trim()\">\r\n            {{ creating ? 'Creating…' : 'Create task' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n  \r\n      <ng-template #readOnlyNote>\r\n        <div class=\"card subtle\">\r\n          <div class=\"card-title\">Read-only access</div>\r\n          <div class=\"muted\">Your role can view tasks, but cannot create/edit/delete.</div>\r\n        </div>\r\n      </ng-template>\r\n  \r\n      <!-- List -->\r\n      <div class=\"card\">\r\n        <div class=\"card-title\">Task List</div>\r\n  \r\n        <div class=\"muted\" *ngIf=\"loading\">Loading…</div>\r\n  \r\n        <div *ngIf=\"!loading && tasks.length === 0\" class=\"muted\">No tasks yet.</div>\r\n  \r\n        <div class=\"list\" *ngIf=\"!loading && tasks.length > 0\">\r\n          <div class=\"item\" *ngFor=\"let t of tasks\">\r\n            <!-- VIEW MODE -->\r\n            <ng-container *ngIf=\"editingId !== t.id; else editMode\">\r\n              <div class=\"item-main\">\r\n                <div class=\"item-title\">\r\n                  <span class=\"title\">{{ t.title }}</span>\r\n                  <span class=\"status\" [class.open]=\"t.status==='OPEN'\" [class.progress]=\"t.status==='IN_PROGRESS'\" [class.done]=\"t.status==='DONE'\">\r\n                    {{ t.status }}\r\n                  </span>\r\n                </div>\r\n  \r\n                <div class=\"desc\" *ngIf=\"t.description\">{{ t.description }}</div>\r\n  \r\n                <div class=\"meta2\">\r\n                  <span>Created by: {{ t.createdByEmail }}</span>\r\n                  <span class=\"dot\">•</span>\r\n                  <span>{{ t.createdAt | date:'medium' }}</span>\r\n                </div>\r\n              </div>\r\n  \r\n              <div class=\"item-actions\" *ngIf=\"canWrite\">\r\n                <button class=\"btn btn-secondary\" (click)=\"startEdit(t)\">Edit</button>\r\n                <button class=\"btn btn-danger\" (click)=\"remove(t.id)\" [disabled]=\"deletingId === t.id\">\r\n                  {{ deletingId === t.id ? 'Deleting…' : 'Delete' }}\r\n                </button>\r\n              </div>\r\n            </ng-container>\r\n  \r\n            <!-- EDIT MODE -->\r\n            <ng-template #editMode>\r\n              <div class=\"edit\">\r\n                <div class=\"grid\">\r\n                  <label class=\"span-2\">\r\n                    <span>Title</span>\r\n                    <input class=\"input\" [(ngModel)]=\"editTitle\" />\r\n                  </label>\r\n  \r\n                  <label>\r\n                    <span>Status</span>\r\n                    <select class=\"input\" [(ngModel)]=\"editStatus\">\r\n                      <option value=\"OPEN\">OPEN</option>\r\n                      <option value=\"IN_PROGRESS\">IN_PROGRESS</option>\r\n                      <option value=\"DONE\">DONE</option>\r\n                    </select>\r\n                  </label>\r\n  \r\n                  <label class=\"span-3\">\r\n                    <span>Description</span>\r\n                    <textarea class=\"input\" [(ngModel)]=\"editDescription\" rows=\"3\"></textarea>\r\n                  </label>\r\n                </div>\r\n  \r\n                <div class=\"actions\">\r\n                  <button class=\"btn\" (click)=\"saveEdit(t.id)\" [disabled]=\"savingId === t.id\">\r\n                    {{ savingId === t.id ? 'Saving…' : 'Save' }}\r\n                  </button>\r\n                  <button class=\"btn btn-ghost\" (click)=\"cancelEdit()\">Cancel</button>\r\n                </div>\r\n              </div>\r\n            </ng-template>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}